<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neon Dogfight - Infinite Loop</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="menu-screen" class="screen active">
        <h1 class="neon-title">NEON DOGFIGHT</h1>
        
        <!-- Game Mode Selection -->
        <div class="mode-selector">
            <h3>Game Mode</h3>
            <div class="mode-buttons">
                <button id="mode-local" class="mode-button active">Local 2P</button>
                <button id="mode-host" class="mode-button">Host Online</button>
                <button id="mode-join" class="mode-button">Join Online</button>
            </div>
        </div>
        
        <!-- Player Configuration -->
        <div class="player-config">
            <div class="player-section">
                <h2 class="player1-color">Player 1</h2>
                <input type="text" id="player1-name" placeholder="Name" value="Player 1" maxlength="15">
                <div class="color-input">
                    <label>Color:</label>
                    <input type="color" id="player1-color" value="#00FFFF">
                </div>
            </div>
            <div class="player-section" id="player2-section">
                <h2 class="player2-color">Player 2</h2>
                <input type="text" id="player2-name" placeholder="Name" value="Player 2" maxlength="15">
                <div class="color-input">
                    <label>Color:</label>
                    <input type="color" id="player2-color" value="#FF1493">
                </div>
            </div>
        </div>
        
        <!-- Battle Code UI (for online modes) -->
        <div id="battle-code-section" class="battle-code-section" style="display: none;">
            <div id="host-code-display" style="display: none;">
                <h3>Your Battle Code</h3>
                <div class="code-display">
                    <input type="text" id="battle-code-display" readonly>
                    <button id="copy-code" class="secondary-button">Copy</button>
                </div>
                <p class="code-info">Share this code with friends to let them join!</p>
            </div>
            <div id="join-code-input" style="display: none;">
                <h3>Enter Battle Code</h3>
                <input type="text" id="battle-code-input" placeholder="e.g. A3F7" maxlength="4" style="text-transform: uppercase;">
            </div>
        </div>
        <div class="stats">
            <h3>Statistics</h3>
            <p>Player 1 Wins: <span id="p1-wins">0</span></p>
            <p>Player 2 Wins: <span id="p2-wins">0</span></p>
            <p>Total Rounds: <span id="total-rounds">0</span></p>
            <button id="reset-stats" class="secondary-button">Reset Stats</button>
        </div>
        <button id="start-game" class="primary-button">START GAME</button>
        <div class="controls-info">
            <div class="control-column">
                <h4>Player 1 (WASD + E)</h4>
                <p>W/S: Speed Up/Down</p>
                <p>A/D: Turn Left/Right</p>
                <p>E: Fire</p>
            </div>
            <div class="control-column">
                <h4>Player 2 (Arrows + -)</h4>
                <p>↑/↓: Speed Up/Down</p>
                <p>←/→: Turn Left/Right</p>
                <p>-: Fire</p>
            </div>
            <div class="control-column">
                <h4>Game</h4>
                <p>ESC: Return to Menu</p>
            </div>
        </div>
    </div>

    <div id="game-screen" class="screen">
        <div id="game-container">
            <div id="hud">
                <div id="scores-container"></div>
                <div id="score-center">First to 3</div>
                <div id="battle-code-hud" style="display: none;">
                    Code: <span id="battle-code-hud-text"></span>
                </div>
            </div>
            <canvas id="game-canvas"></canvas>
        </div>
    </div>

    <div id="gameover-screen" class="screen">
        <h1 id="winner-text" class="neon-title"></h1>
        <div class="gameover-buttons">
            <button id="play-again" class="primary-button">PLAY AGAIN</button>
            <button id="main-menu" class="secondary-button">MAIN MENU</button>
        </div>
    </div>

    <!-- PeerJS for P2P multiplayer -->
    <script src="https://unpkg.com/peerjs@1.5.1/dist/peerjs.min.js"></script>
    
    <!-- Core utilities and settings -->
    <script src="settings.js"></script>
    <script src="utils.js"></script>
    
    <!-- Game entities -->
    <script src="particles.js"></script>
    <script src="weapons.js"></script>
    <script src="asteroid.js"></script>
    <script src="powerups.js"></script>
    <script src="spawner.js"></script>
    
    <!-- Rendering system -->
    <script src="rendering/PlayerRenderer.js"></script>
    
    <!-- Network layer -->
    <script src="network.js"></script>
    
    <!-- Player classes -->
    <script src="player.js"></script>
    
    <!-- Manager systems (must load before game.js) -->
    <script src="managers/PlayerController.js"></script>
    <script src="managers/PlayerManager.js"></script>
    <script src="managers/WeaponManager.js"></script>
    <script src="managers/CollisionSystem.js"></script>
    <script src="managers/EntityManager.js"></script>
    
    <!-- Network facade -->
    <script src="facades/GameNetworkFacade.js"></script>
    
    <!-- UI and Audio -->
    <script src="audio.js"></script>
    <script src="ui.js"></script>
    
    <!-- Main game (loads last, depends on all managers) -->
    <script src="game.js"></script>
</body>
</html>

